---
title: "Gather PBP Data"
output: html_notebook
---

#

```{r}
library(nflfastR)
library(tidyr)
```

#num_seasons lets you decide how many years worth of data you would like to use.
#maximum is 20 and only takes integers.
```{r}
num_seasons=1
start_season=2022-num_seasons
```

#Downloads all Football plays that have happened from the previous seasons
```{r}
future::plan("multisession")
parallelPBP <-nflfastR::load_pbp(start_season:2021)
```


#This code will write every play into a csv however since we will be removing some games this csv won't really be used. Any analysis that includes playoffs games should use this csv.
```{r}
#write.csv(parallelPBP, "../data/full_pbp.csv")
```

#Removes all plays that aren't from the regular season
```{r}
    data <- parallelPBP %>%
      dplyr::filter(parallelPBP$season_type %in% c("REG"))
```

#Writes out the usable data to a csv
```{r}
write.csv(data, "../data/regular_season_pbp.csv")
```